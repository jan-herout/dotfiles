#!/bin/bash

MM_DEFDIR=$HOME/bin/net-mount-points

# colors
MM_ERR="\e[31mERR\e[0m"
MM_TRY="\033[33mTRY\033[0m"
MM_OK="\033[34mOK\033[0m "


# kontrola existence adresáře s definicemi
echo -e "$MM_TRY: test mount points config: $MM_DEFDIR"
if [ ! -d "$MM_DEFDIR" ]; then
    echo -e "$MM_ERR: Directory does not exist: $MM_DEFDIR <directory>"
    exit 0 
fi
echo -e "$MM_OK: mount point config dir exists"


# zkontroluj mount
for MM_DEFFILE in "$MM_DEFDIR"/*; do
    echo -e "$MM_TRY: read $MM_DEFFILE"
    source $MM_DEFFILE

    if [ -d "$_MNT_" ]; then
        findmnt $_MNT_ >/dev/null 2>&1
        if [ $? -eq 0 ]; then
            echo -e "$MM_OK: directory is already mounted: $_MNT_"
            exit 1
        else
            echo -e "$MM_TRY: not mounted: $_MNT_"
        fi
    fi
done



#!/bin/bash
[ "$(type -t include)" != 'function' ]&&{ include(){ { [ -z "$_IR" ]&&_IR="$PWD"&&cd "$(dirname "${BASH_SOURCE[0]}")"&&include "$1"&&cd "$_IR"&&unset _IR;}||{ local d="$PWD"&&cd "$(dirname "$PWD/$1")"&&. "$(basename "$1")"&&cd "$d";}||{ echo "Include failed $PWD->$1"&&exit 1;};};}
include "lib/user_io.sh"
include "lib/die.sh"

export http_proxy=""
export https_proxy=""
cur_proxy=""

[[ -f $HOME/.gitproxy ]] && cur_proxy=$(cat $HOME/.gitproxy | grep proxy | awk '{ print $3 }') 
[[ -z "$cur_proxy" ]] && return



printInfo "git config --global --unset http.proxy"
[[ -f $HOME/.gitproxy ]] && rm $HOME/.gitproxy
echo "[http]
    proxy = " >$HOME/.gitproxy || fDie "Failed to write to $HOME/.gitproxy"
#!/usr/bin/env bash
# doc: Validuje JSON soubor pomocí jq a vrací exit kódy

[ "$(type -t include)" != 'function' ]&&{ include(){ { [ -z "$_IR" ]&&_IR="$PWD"&&cd "$(dirname "${BASH_SOURCE[0]}")"&&include "$1"&&cd "$_IR"&&unset _IR;}||{ local d="$PWD"&&cd "$(dirname "$PWD/$1")"&&. "$(basename "$1")"&&cd "$d";}||{ echo "Include failed $PWD->$1"&&exit 1;};};}
include "lib/user_io.sh"
include "lib/die.sh"


[ $# -ne 1 ] && fDie "Usage: $0 <filename>"

if ! command -v jq >/dev/null 2>&1; then
  fDie "Error: 'jq' is not installed."
  exit 2
fi

if jq empty "$1" >/dev/null 2>&1; then
  printSuccess "valid json: $1"
else
  fDie "INVALID JSON: $1"
fi